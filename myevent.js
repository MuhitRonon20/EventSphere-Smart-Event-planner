const itemsData = {
  venue: {
    img: "image/image1.jpg",
    subcategories: {
      BanquetHalls: {
        img: "image/banquet.jpg",
        items: [
          { name: "Grand Hall A Estiment:120-200 Location: 32 Rankin street ,Wari", price: 1500, img: "https://via.placeholder.com/220x130?text=Grand+Hall+A" },
          { name: "Grand Hall B", price: 1600, img: "https://via.placeholder.com/220x130?text=Grand+Hall+B" }
        ]
      },
      Rooftop: {
        img: "image/rooftop.png",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      Convention: {
        img: "image/convention.jpg",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      Conference: {
        img: "image/conference.jpg",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      Hotels: {
        img: "image/hotel.jpg",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      Resorts: {
        img: "image/resort.jpg",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      Restaurants: {
        img: "image/resturant.avif",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
       Community: {
        img: "image/community.jpg",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      Cruise  : {
        img: "image/cruish.webp",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      Stadiums: {
        img: "image/stadiumcat.webp",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      Academy: {
        img: "image/academy.jpg",
        items: [
          { name: "Rooftop Bliss", price: 1700, img: "https://via.placeholder.com/220x130?text=Rooftop+Bliss" }
        ]
      },
      // Add more subcategories if needed...
    }
  },
  catering: {
    img: "image/catering.jpg",
    subcategories: {
      Buffet: {
        img: "image/buffet.jpg",
        items: [
          { name: "Premium Buffet", price: 900, img: "https://via.placeholder.com/220x130?text=Premium+Buffet" }
        ]
      },
      Plated: {
        img: "image/plated.jpg",
        items: [
          { name: "Standard Meal", price: 700, img: "https://via.placeholder.com/220x130?text=Standard+Meal" }
        ]
      },
      
      "Full Service Catering": {
        img: "https://via.placeholder.com/100?text=Plated",
        items: [
          { name: "Standard Meal", price: 700, img: "https://via.placeholder.com/220x130?text=Standard+Meal" }
        ]
      },
      "Wedding Catering": {
        img: "https://via.placeholder.com/100?text=Plated",
        items: [
          { name: "Standard Meal", price: 700, img: "https://via.placeholder.com/220x130?text=Standard+Meal" }
        ]
      },
      "Food Truck Catering" : {
        img: "https://via.placeholder.com/100?text=Plated",
        items: [
          { name: "Standard Meal", price: 700, img: "https://via.placeholder.com/220x130?text=Standard+Meal" }
        ]
      },
      "Live Station Catering": {
        img: "https://via.placeholder.com/100?text=Plated",
        items: [
          { name: "Standard Meal", price: 700, img: "https://via.placeholder.com/220x130?text=Standard+Meal" }
        ]
      },
      "Plated/Sit-down Catering" : {
        img: "https://via.placeholder.com/100?text=Plated",
        items: [
          { name: "Standard Meal", price: 700, img: "https://via.placeholder.com/220x130?text=Standard+Meal" }
        ]
      },
      "Social Event Catering" : {
        img: "https://via.placeholder.com/100?text=Plated",
        items: [
          { name: "Standard Meal", price: 700, img: "https://via.placeholder.com/220x130?text=Standard+Meal" }
        ]
      },
      "Corporate Catering": {
        img: "https://via.placeholder.com/100?text=Plated",
        items: [
          { name: "Standard Meal", price: 700, img: "https://via.placeholder.com/220x130?text=Standard+Meal" }
        ]
      },
    }
  },
  photography: {
    img: "image/photography.jpg",
    subcategories: {
      "Full Package": {
        img: "https://via.placeholder.com/100?text=Full+Package",
        items: [
          { name: "Photo + Video", price: 1000, img: "https://via.placeholder.com/220x130?text=Photo+%2B+Video" }
        ]
      },
      Basic: {
        img: "https://via.placeholder.com/100?text=Basic",
        items: [
          { name: "Photo Only", price: 700, img: "https://via.placeholder.com/220x130?text=Photo+Only" }
        ]
      },
      Premimum: {
        img: "https://via.placeholder.com/100?text=Basic",
        items: [
          { name: "Photo Only", price: 700, img: "https://via.placeholder.com/220x130?text=Photo+Only" }
        ]
      },
      Royal: {
        img: "https://via.placeholder.com/100?text=Basic",
        items: [
          { name: "Photo Only", price: 700, img: "https://via.placeholder.com/220x130?text=Photo+Only" }
        ]
      },
      Special: {
        img: "https://via.placeholder.com/100?text=Basic",
        items: [
          { name: "Photo Only", price: 700, img: "https://via.placeholder.com/220x130?text=Photo+Only" }
        ]
      }
    }
  },
  lighting: {
    img: "image/light.avif",
    subcategories: {
      Ambient : {
        img: "https://via.placeholder.com/100?text=LED",
        items: [
          { name: "LED Setup", price: 400, img: "https://via.placeholder.com/220x130?text=LED+Setup" }
        ]
      },
      Accent : {
        img: "https://via.placeholder.com/100?text=Stage",
        items: [
          { name: "Stage Lighting", price: 600, img: "https://via.placeholder.com/220x130?text=Stage+Lighting" }
        ]
      },
      Decorative  : {
        img: "https://via.placeholder.com/100?text=Stage",
        items: [
          { name: "Stage Lighting", price: 600, img: "https://via.placeholder.com/220x130?text=Stage+Lighting" }
        ]
      },
      Stage   : {
        img: "https://via.placeholder.com/100?text=Stage",
        items: [
          { name: "Stage Lighting", price: 600, img: "https://via.placeholder.com/220x130?text=Stage+Lighting" }
        ]
      },
      Effect    : {
        img: "https://via.placeholder.com/100?text=Stage",
        items: [
          { name: "Stage Lighting", price: 600, img: "https://via.placeholder.com/220x130?text=Stage+Lighting" }
        ]
      },
      Outdoor    : {
        img: "https://via.placeholder.com/100?text=Stage",
        items: [
          { name: "Stage Lighting", price: 600, img: "https://via.placeholder.com/220x130?text=Stage+Lighting" }
        ]
      },
      Intelligent  : {
        img: "https://via.placeholder.com/100?text=Stage",
        items: [
          { name: "Stage Lighting", price: 600, img: "https://via.placeholder.com/220x130?text=Stage+Lighting" }
        ]
      },
    }
  },
  Electric: {
    img: "image/elec.jpg",
    subcategories: {
      PowerSupply : {
        img: "https://via.placeholder.com/100?text=Full+Package",
        items: [
          { name: "Photo + Video", price: 1000, img: "https://via.placeholder.com/220x130?text=Photo+%2B+Video" }
        ]
      },
      
    }
  }, 
  Entertainment: {
    img: "image/Entertainment.webp",
    subcategories: {
      Soundsystem : {
        img: "https://via.placeholder.com/100?text=Full+Package",
        items: [
          { name: "Photo + Video", price: 1000, img: "https://via.placeholder.com/220x130?text=Photo+%2B+Video" }
        ]
      },
      LED  : {
        img: "https://via.placeholder.com/100?text=Basic",
        items: [
          { name: "Photo Only", price: 700, img: "https://via.placeholder.com/220x130?text=Photo+Only" }
        ]
      },
      Floorsetup : {
        img: "https://via.placeholder.com/100?text=Basic",
        items: [
          { name: "Photo Only", price: 700, img: "https://via.placeholder.com/220x130?text=Photo+Only" }
        ]
      },
      Acts : {
        img: "https://via.placeholder.com/100?text=Basic",
        items: [
          { name: "Photo Only", price: 700, img: "https://via.placeholder.com/220x130?text=Photo+Only" }
        ]
      },
    }
  }, 
};

const itemsSection = document.getElementById('itemsSection');
const subcategorySection = document.getElementById('subcategorySection');
const cartItemsList = document.getElementById('cartItems');
const totalCostSpan = document.getElementById('totalCost');
const toast = document.getElementById('toast');

let cart = [];

function showItems(category) {
  itemsSection.innerHTML = "";
  subcategorySection.innerHTML = "";

  const subcategories = itemsData[category].subcategories;

  Object.keys(subcategories).forEach(subcat => {
    const sub = subcategories[subcat];
    const div = document.createElement("div");
    div.className = "subcategory-card";
    div.innerHTML = `
      <img src="${sub.img}" alt="${subcat}" />
      <span>${subcat}</span>
    `;
    div.onclick = () => showSubItems(category, subcat);
    subcategorySection.appendChild(div);
  });
}

function showSubItems(category, subcat) {
  itemsSection.innerHTML = "";
  const items = itemsData[category].subcategories[subcat].items;

  items.forEach(item => {
    const card = document.createElement('div');
    card.className = "item-card";

    card.innerHTML = `
      <img src="${item.img}" alt="${item.name}" />
      <h4>${item.name}</h4>
      <p>$${item.price}</p>
    `;

    const btn = document.createElement('button');
    btn.textContent = "Add";
    btn.addEventListener('click', () => addToCart(item.name, item.price));

    card.appendChild(btn);
    itemsSection.appendChild(card);
  });
}

function loadCategories() {
  const container = document.querySelector(".category-list");
  container.innerHTML = "";

  Object.keys(itemsData).forEach(category => {
    const div = document.createElement("div");
    div.className = "category";
    div.onclick = () => showItems(category);
    div.innerHTML = `
      <img src="${itemsData[category].img}" alt="${category}" />
      <span>${category.charAt(0).toUpperCase() + category.slice(1)}</span>
    `;
    container.appendChild(div);
  });
}

function addToCart(name, price) {
  cart.push({ name, price });
  renderCart();
}

function removeFromCart(index) {
  cart.splice(index, 1);
  renderCart();
}

function renderCart() {
  cartItemsList.innerHTML = "";
  let total = 0;

  cart.forEach((item, index) => {
    const li = document.createElement('li');
    li.textContent = `${item.name} - $${item.price}`;

    const removeBtn = document.createElement('button');
    removeBtn.textContent = "x";
    removeBtn.title = "Remove";
    removeBtn.addEventListener('click', () => removeFromCart(index));

    li.appendChild(removeBtn);
    cartItemsList.appendChild(li);

    total += item.price;
  });

  totalCostSpan.textContent = total.toFixed(2);
}

function checkoutCart() {
  if(cart.length === 0) {
    alert("Your cart is empty!");
    return;
  }
  const total = cart.reduce((sum, item) => sum + item.price, 0);
  cart = [];
  renderCart();
  showToast(`Checkout successful! Total: $${total.toFixed(2)}`);

  setTimeout(() => {
    window.location.href = "checkout.html"; // Adjust URL as needed
  }, 2000);
}

function showToast(message) {
  toast.textContent = message;
  toast.classList.add('show');
  setTimeout(() => {
    toast.classList.remove('show');
  }, 3000);
}

// Init
loadCategories();
renderCart();
document.getElementById("cartToggleBtn").addEventListener("click", () => {
  const panel = document.getElementById("cartPanel");
  panel.classList.toggle("open");
});
